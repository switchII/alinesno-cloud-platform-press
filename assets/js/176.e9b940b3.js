(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{547:function(s,t,a){"use strict";a.r(t);var n=a(8),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"hudi-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hudi-安装"}},[s._v("#")]),s._v(" hudi 安装")]),s._v(" "),t("h2",{attrs:{id:"本内容你将获得"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[s._v("#")]),s._v(" 本内容你将获得")]),s._v(" "),t("ul",[t("li",[s._v("flink集成kafka、mysql cdc、hudi")]),s._v(" "),t("li",[s._v("flink sql接收kafka消息")]),s._v(" "),t("li",[s._v("flink sql接收mysql cdc消息")]),s._v(" "),t("li",[s._v("flink sql创建hudi表并映射hive表")])]),s._v(" "),t("h2",{attrs:{id:"软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[s._v("#")]),s._v(" 软件安装")]),s._v(" "),t("h4",{attrs:{id:"说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("hudi依赖Java、scala、flink环境")])]),s._v(" "),t("li",[t("p",[s._v("hudi保存数据到hdfs依赖hadoop环境")])]),s._v(" "),t("li",[t("p",[s._v("hudi映射hive表依赖hive环境")])])]),s._v(" "),t("h3",{attrs:{id:"集成开始"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成开始"}},[s._v("#")]),s._v(" 集成开始")]),s._v(" "),t("h4",{attrs:{id:"编译jar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译jar包"}},[s._v("#")]),s._v(" 编译jar包")]),s._v(" "),t("h5",{attrs:{id:"编译hudi-jar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译hudi-jar包"}},[s._v("#")]),s._v(" 编译hudi  jar包")]),s._v(" "),t("p",[s._v("从hudi代码仓库下载源码并切换到0.12.0分支")]),s._v(" "),t("p",[s._v("修改Hudi\\pom.xml中kafka、hadoop、hive、spark2、scala12、scala.binary的版本")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v(" #软件版本与数据环境一致\n "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("kafka"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <kafka.version>2.0.0</kafka.version>")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <hadoop.version>2.10.1</hadoop.version>")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <hive.version>2.3.1</hive.version> ")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("spark2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".8")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spark2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <spark2.version>2.4.4</spark2.version>")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("scala12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".15")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("scala12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <scala12.version>2.12.10</scala12.version> ")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("scala"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("binary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.12")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("scala"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("binary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <scala.binary.version>2.11</scala.binary.version> ")]),s._v("\n")])])]),t("br"),s._v(" "),t("p",[s._v("修改Hudi\\packaging\\hudi-flink-bundle\\pom.xml中hive的版本")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <hive.version>2.3.1</hive.version>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("flink"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bundle"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("shade"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hive3"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("properties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：   <hive.version>3.1.2</hive.version>")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("flink"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bundle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scope"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("compile"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("flink"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bundle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("properties"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    \n")])])]),t("br"),s._v(" "),t("p",[s._v("修改Hudi\\hudi-common\\src\\main\\java\\org\\apache\\hudi\\common\\table\\log\\block\\HoodieParquetDataBlock.java的构造函数")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FSDataOutputStream")]),s._v(" outputStream "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FSDataOutputStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("baos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧： try (FSDataOutputStream outputStream = new FSDataOutputStream(baos))   //避免编译报错")]),s._v("\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"编译-hudi-flink1-14-bundle-2-12-0-12-0-jar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译-hudi-flink1-14-bundle-2-12-0-12-0-jar"}},[s._v("#")]),s._v(" 编译 hudi-flink1.14-bundle_2.12-0.12.0.jar")]),s._v(" "),t("p",[s._v("进入Hudi\\packaging\\hudi-flink-bundle目录，执行 mvn clean install -DskipTests -Drat.skip=true -Pflink-bundle-shade-hive3 进行编译")]),s._v(" "),t("p",[s._v("使用压缩工具打开hudi-flink1.14-bundle_2.12-0.12.0.jar(非解压),修改hbase-default.xml、hbase-site.xml中的hbase版本及是否跳过")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hbase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alpha4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <value>2.4.9</value>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hbase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <value>false</value>  ")]),s._v("\n")])])]),t("p",[s._v("将hudi-flink1.14-bundle_2.12-0.12.0.jar 上传到 /root/tools/flink-1.14.5/lib目录")]),s._v(" "),t("br"),s._v(" "),t("h6",{attrs:{id:"编译hudi-hadoop-mr-bundle-0-12-0-jar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译hudi-hadoop-mr-bundle-0-12-0-jar"}},[s._v("#")]),s._v(" 编译hudi-hadoop-mr-bundle-0.12.0.jar")]),s._v(" "),t("p",[s._v("进入Hudi\\packaging\\hudi-hadoop-mr-bundle 目录，执行 mvn clean install -DskipTests 进行编译")]),s._v(" "),t("p",[s._v("使用压缩工具打开hudi-hadoop-mr-bundle-0.12.0.jar(非解压),修改hbase-default.xml、hbase-site.xml中的hbase版本及是否跳过")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hbase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alpha4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <value>2.4.9</value>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hbase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：   <value>false</value>")]),s._v("\n")])])]),t("p",[s._v("将hudi-hadoop-mr-bundle-0.12.0.jar 上传到 /root/tools/hive-3.1.3/auxlib、/root/tools/hive-3.1.3/lib目录")]),s._v(" "),t("br"),s._v(" "),t("h6",{attrs:{id:"编译hudi-hive-sync-bundle-0-12-0-jar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译hudi-hive-sync-bundle-0-12-0-jar"}},[s._v("#")]),s._v(" 编译hudi-hive-sync-bundle-0.12.0.jar")]),s._v(" "),t("p",[s._v("进入Hudi\\packaging\\hudi-hive-sync-bundle 目录，执行  mvn clean install -DskipTests 进行编译")]),s._v(" "),t("p",[s._v("使用压缩工具打开hudi-hive-sync-bundle-0.12.0.jar(非解压),修改hbase-default.xml、hbase-site.xml中的hbase版本及是否跳过")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hbase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alpha4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <value>2.4.9</value>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hbase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：   <value>false</value>")]),s._v("\n")])])]),t("p",[s._v("将hudi-hive-sync-bundle-0.12.0.jar 上传到 /root/tools/hive-3.1.3/auxlib目录")]),s._v(" "),t("br"),s._v(" "),t("h5",{attrs:{id:"编译flink-shaded-hadoop-jar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译flink-shaded-hadoop-jar包"}},[s._v("#")]),s._v(" 编译flink-shaded-hadoop jar包")]),s._v(" "),t("p",[s._v("从flink-shaded代码仓库下载源码并切换到release-10.0分支")]),s._v(" "),t("p",[s._v("修改flink-shaded\\pom.xml，在<profiles>增加如下配置，用于优化网络")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("profile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("vendor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("repos"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("activation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("vendor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("repos"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("activation"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Add")]),s._v(" vendor maven repositories "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("repositories"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cloudera")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("repository"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("cloudera"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("releases"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("maven"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("aliyun"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("repository"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("central"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("releases"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("releases"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("snapshots"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("snapshots"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("repository"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("repositories"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("br"),s._v(" "),t("p",[s._v("修改flink-shaded\\flink-shaded-hadoop-2-parent\\pom.xml")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：<hadoop.version>2.4.1</hadoop.version>    \x3c!--对应hadoop的版本3.3.4--\x3e")]),s._v("\n")])])]),t("br"),s._v(" "),t("p",[s._v("修改\\flink-shaded\\flink-shaded-hadoop-2-parent\\flink-shaded-hadoop-2\\pom.xml")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("packaging"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("jar"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("packaging"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：<version>${hadoop.version}-10.0</version>  \x3c!--对应flink的版本1.14.5--\x3e")]),s._v("\n")])])]),t("br"),s._v(" "),t("p",[s._v("修改flink-shaded\\flink-shaded-hadoop-2-parent\\flink-shaded-hadoop-2-uber\\pom.xml")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("packaging"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("jar"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("packaging"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：<version>${hadoop.version}-10.0</version>   \x3c!--对应flink的版本1.14.5--\x3e")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependencies"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("flink"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("groupId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("flink"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("shaded"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("artifactId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧：  <version>${hadoop.version}-10.0</version> \x3c!--对应flink的版本1.14.5--\x3e")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dependency"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("                                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//增加依赖")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("commons"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("groupId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("commons"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("artifactId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dependency"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dependencies"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    \n")])])]),t("br"),s._v(" "),t("p",[s._v("在flink-shaded目录下，执行 mvn clean install -DskipTests -Dhadoop.version=3.3.4 -Drat.skip=true 进行编译")]),s._v(" "),t("p",[s._v("将 flink-shaded-hadoop-2-uber-3.3.4-14.0.jar 上传到 /root/tools/flink-1.14.5/lib目录")]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"下载jar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载jar包"}},[s._v("#")]),s._v(" 下载jar包")]),s._v(" "),t("p",[s._v("登录maven官方仓库")]),s._v(" "),t("p",[s._v("搜索flink connector kafka，下载flink-connector-kafka_2.12-1.14.5.jar,用于flink集成kafka")]),s._v(" "),t("p",[s._v("搜索flink sql connector kafka，下载flink-sql-connector-kafka_2.12-1.14.5.jar,用于flink sql集成kafka")]),s._v(" "),t("p",[s._v("搜索 kafka clients ，下载kafka-clients-3.2.0.jar")]),s._v(" "),t("p",[s._v("搜索flink sql connector mysql cdc ，下载flink-sql-connector-mysql-cdc-2.2.1.jar ,用于flink sql集成mysql cdc")]),s._v(" "),t("p",[s._v("将4个jar上传到 /root/tools/flink-1.14.5/lib目录")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"flink-sql接收kafka消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-sql接收kafka消息"}},[s._v("#")]),s._v(" flink sql接收kafka消息")]),s._v(" "),t("h4",{attrs:{id:"启动-flink"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-flink"}},[s._v("#")]),s._v(" 启动 flink")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/flink-1.14.5/bin\n\n--设置环境变量\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$HADOOP_HOME/bin/hadoop classpath"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n--启动集群\n./start-cluster.sh\n\n")])])]),t("br"),s._v(" "),t("h4",{attrs:{id:"kafka产生消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka产生消息"}},[s._v("#")]),s._v(" kafka产生消息")]),s._v(" "),t("h6",{attrs:{id:"启动-kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-kafka"}},[s._v("#")]),s._v(" 启动 kafka")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/kafka_2.12-3.2.0/bin\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" kafka-server-start.sh "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/config/server.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#非守护进程启动，进程容易异常挂掉")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" kafka-server-start.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-daemon")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/config/server.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#守护进程启动，防止进程异常挂掉")]),s._v("\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"创建-topic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-topic"}},[s._v("#")]),s._v(" 创建 topic")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/kafka_2.12-3.2.0/bin\n./kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--create")]),s._v(" --bootstrap-server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.149:9092 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--partitions")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" flinktest\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"查看当前-topic-列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看当前-topic-列表"}},[s._v("#")]),s._v(" 查看当前 topic 列表")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/kafka_2.12-3.2.0/bin\n./kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v(" --bootstrap-server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.149:9092\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"产生消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#产生消息"}},[s._v("#")]),s._v(" 产生消息")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/kafka_2.12-3.2.0/bin\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" kafka-console-producer.sh --broker-list "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.149:9092 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" flinktest\n//生产端发消息\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tinyint0"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smallint1"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("223")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"int2"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42999")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bigint3"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("429450")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"float4"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("95.47324181659323")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"double5"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("340.5755392968011")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"decimal6"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("111.1111")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boolean7"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"char8"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dddddd"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"varchar9"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"buy0"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string10"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"buy1"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"timestamp11"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-09-13 03:08:50.810"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"消费消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费消息"}},[s._v("#")]),s._v(" 消费消息")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/kafka_2.12-3.2.0/bin\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" kafka-console-consumer.sh --bootstrap-server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.149:9092   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" flinktest --from-beginning\n")])])]),t("br"),s._v(" "),t("h4",{attrs:{id:"进入-flinksql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入-flinksql"}},[s._v("#")]),s._v(" 进入 flinksql")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/flink-1.14.5/bin\n\n--设置环境变量\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$HADOOP_HOME/bin/hadoop classpath"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n./sql-client.sh embedded\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"创建与-kafka-关联的表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建与-kafka-关联的表"}},[s._v("#")]),s._v(" 创建与 kafka 关联的表")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("Flink "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" kafkatest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("    tinyint0 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("smallint1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SMALLINT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("int2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("bigint3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("float4 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FLOAT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("double5 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DOUBLE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("decimal6 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECIMAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("boolean7 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BOOLEAN")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("char8 STRING\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("varchar9 STRING\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("string10 STRING\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("timestamp11 STRING\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'connector'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kafka'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用 kafka connector")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'topic'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'flinktest'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- kafka topic名称")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'scan.startup.mode'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'earliest-offset'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 从起始 offset 开始读取")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'properties.bootstrap.servers'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.17.149:9092'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- kafka broker 地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'properties.group.id'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'testgroup1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value.format'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'json'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value.json.fail-on-missing-field'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value.fields-include'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ALL'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Execute")]),s._v(" statement succeed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])])]),t("br"),s._v(" "),t("h6",{attrs:{id:"查询表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询表"}},[s._v("#")]),s._v(" 查询表")]),s._v(" "),t("p",[s._v("在 kafka 生产端，发消息后，应看到表接收到数据")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("Flink "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" kafkatest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("br"),s._v(" "),t("h3",{attrs:{id:"flink-sql接收mysql-cdc消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-sql接收mysql-cdc消息"}},[s._v("#")]),s._v(" flink sql接收mysql cdc消息")]),s._v(" "),t("h5",{attrs:{id:"查看数据库是否开启bin-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看数据库是否开启bin-log"}},[s._v("#")]),s._v(" 查看数据库是否开启bin_log")]),s._v(" "),t("p",[s._v("如没有开启，需要修改/etc/my.cnf文件，增加如下内容并重启数据库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("log-bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin\nbinlog-format"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ROW\n")])])]),t("br"),s._v(" "),t("h5",{attrs:{id:"进入flinksql并创建关联mysql的表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入flinksql并创建关联mysql的表"}},[s._v("#")]),s._v(" 进入flinksql并创建关联mysql的表")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("Flink "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" users_source_mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" ENFORCED\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name STRING\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("birthday "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'connector'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql-cdc'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hostname'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.17.149'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'port'")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3306'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'username'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'qaz123689'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'server-time-zone'")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Asia/Shanghai'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'debezium. snapshot.mode'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'initial '")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'database-name'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'table-name'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tbl_users'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Execute")]),s._v(" statement succeed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\nFlink "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" users_source_mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h5",{attrs:{id:"在mysql数据库修改表tbl-users信息、删除表信息、新增记录-flinksql应可观察到数据变化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在mysql数据库修改表tbl-users信息、删除表信息、新增记录-flinksql应可观察到数据变化"}},[s._v("#")]),s._v(" 在mysql数据库修改表tbl_users信息、删除表信息、新增记录，flinksql应可观察到数据变化")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"flink-sql创建hudi表并映射hive表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-sql创建hudi表并映射hive表"}},[s._v("#")]),s._v(" flink sql创建hudi表并映射hive表")]),s._v(" "),t("h5",{attrs:{id:"在hive中创建public数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在hive中创建public数据库"}},[s._v("#")]),s._v(" 在hive中创建public数据库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("hive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" create database public "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("br"),s._v(" "),t("h5",{attrs:{id:"进入flinksql客户端-创建hudi时映射hive表-往hudi表中插入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入flinksql客户端-创建hudi时映射hive表-往hudi表中插入数据"}},[s._v("#")]),s._v(" 进入flinksql客户端，创建hudi时映射hive表，往hudi表中插入数据")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./sql-client.sh embedded  ")]),s._v("\nFlink SQL"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CREATE TABLE nation_info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  numeric_code     int\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ,national_name    string\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ,roman_spelling   string\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ,alphabetic_code  string\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ,primary key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("numeric_code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" not enforced\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("WITH "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'connector'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hudi'")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hdfs:///user/flink/hudi/public/nation_info'")]),s._v(",  --hudi表的hdfs存储路径\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'table.type'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'COPY_ON_WRITE'")]),s._v(",                         --写时复制模式   \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'write.bucket_assign.tasks'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'write.tasks'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.enable'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v(", -- 开启自动同步hive\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.mode'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hms'")]),s._v(",    -- 自动同步hive模式，默认jdbc模式\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.metastore.uris'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'thrift://192.168.17.149:9083'")]),s._v(",   -- hive metastore地址\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.jdbc_url'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jdbc:hive2://192.168.17.149:10000'")]),s._v(",   -- required, hiveServer地址\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.table'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nation_info'")]),s._v(",      -- hive 新建表名\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.db'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'public'")]),s._v(",              -- hive 新建数据库名\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.username'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive'")]),s._v(",          -- hive 用户名\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.password'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'qaz123689'")]),s._v(",     -- hive 密码\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive_sync.support_timestamp'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v("  -- 兼容hive timestamp类型\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFlink SQL"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" insert into nation_info VALUES\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'汉族测试'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Han'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HA'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'蒙古族测试'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Mongol'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MG'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Submitting SQL update statement to the cluster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" SQL update statement has been successfully submitted to the cluster:\nJob ID: ed3e34be09a0c71984d7dc26b33fdf54\nFlink SQL"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n\n")])])]),t("br"),s._v(" "),t("h5",{attrs:{id:"进入hive数据库-验证映射表功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入hive数据库-验证映射表功能"}},[s._v("#")]),s._v(" 进入hive数据库,验证映射表功能")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("hive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nation_info "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("  numeric_code "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--查询表是否有数据")]),s._v("\nOK\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20220915171415714")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20220915171415714")]),s._v("_0_2   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("f23eff2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("ba"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("499")]),s._v("f"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("806")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("a0dd59777d5_0"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("_20220915171415714"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parquet    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v("     汉族测试        Han     HA\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20220915171415714")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20220915171415714")]),s._v("_0_3   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("f23eff2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("ba"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("499")]),s._v("f"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("806")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("a0dd59777d5_0"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("_20220915171415714"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parquet    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v("     蒙古族测试      Mongol  MG\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Time")]),s._v(" taken: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.354")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Fetched: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nhive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nation_info "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--查看表结构")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("09")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("59")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("151")]),s._v(" INFO  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v("c9a8f2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d526"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4057")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("aa73"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("ebb073a1440 main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ListSinkOperator "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Operator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java:logStats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1038")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" RECORDS_OUT_INTERMEDIATE:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" RECORDS_OUT_OPERATOR_LIST_SINK_0:"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" EXTERNAL "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("public.nation_info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("_hoodie_commit_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("_hoodie_commit_seqno"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("_hoodie_record_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("_hoodie_partition_path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("_hoodie_file_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("numeric_code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("national_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("roman_spelling"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("alphabetic_code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT SERDE \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" SERDEPROPERTIES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hoodie.query.as.ro.table'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'false'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hdfs:///user/flink/hudi/public/nation_info'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nSTORED "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" INPUTFORMAT \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'org.apache.hudi.hadoop.HoodieParquetInputFormat'")]),s._v(" \nOUTPUTFORMAT \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat'")]),s._v("\nLOCATION\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hdfs://192.168.17.149:9000/user/flink/hudi/public/nation_info'")]),s._v("\nTBLPROPERTIES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'last_commit_time_sync'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20220913210502766'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'spark.sql.sources.provider'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hudi'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'spark.sql.sources.schema.numParts'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'spark.sql.sources.schema.part.0'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"type":"struct","fields":[{"name":"_hoodie_commit_time","type":"string","nullable":true,"metadata":{}},{"name":"_hoodie_commit_seqno","type":"string","nullable":true,"metadata":{}},{"name":"_hoodie_record_key","type":"string","nullable":true,"metadata":{}},{"name":"_hoodie_partition_path","type":"string","nullable":true,"metadata":{}},{"name":"_hoodie_file_name","type":"string","nullable":true,"metadata":{}},{"name":"numeric_code","type":"integer","nullable":false,"metadata":{}},{"name":"national_name","type":"string","nullable":true,"metadata":{}},{"name":"roman_spelling","type":"string","nullable":true,"metadata":{}},{"name":"alphabetic_code","type":"string","nullable":true,"metadata":{}}]}\'')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'transient_lastDdlTime'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1662317806'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Time")]),s._v(" taken: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.366")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Fetched: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("br"),s._v(" "),t("h5",{attrs:{id:"查看hudi表的hdfs文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看hudi表的hdfs文件"}},[s._v("#")]),s._v(" 查看hudi表的hdfs文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoopmaster etc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hadoop fs -ls hdfs:///user/flink/hudi/public/nation_info")]),s._v("\nFound "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" items\ndrwxr-xr-x   - root supergroup          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-05 02:56 hdfs:///user/flink/hudi/public/nation_info/.hoodie\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-05 02:56 hdfs:///user/flink/hudi/public/nation_info/.hoodie_partition_metadata\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("436145")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-05 02:56 hdfs:///user/flink/hudi/public/nation_info/67a6d28e-2804-4039-8e75-007e54903a2a_0-1-0_20220905025642928.parquet\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoopmaster sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hadoop fs -ls hdfs:///user/flink/hudi/public/nation_info")]),s._v("\nFound "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" items\ndrwxr-xr-x   - root supergroup          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":14 hdfs:///user/flink/hudi/public/nation_info/.hoodie\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":52 hdfs:///user/flink/hudi/public/nation_info/.hoodie_partition_metadata\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("434972")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":52 hdfs:///user/flink/hudi/public/nation_info/5f23eff2-16ba-499f-806d-6a0dd59777d5_0-1-0_20220915145209326.parquet\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("435119")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":10 hdfs:///user/flink/hudi/public/nation_info/5f23eff2-16ba-499f-806d-6a0dd59777d5_0-1-0_20220915170959370.parquet\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("435117")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":11 hdfs:///user/flink/hudi/public/nation_info/5f23eff2-16ba-499f-806d-6a0dd59777d5_0-1-0_20220915171157486.parquet\n-rw-r--r--   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root supergroup     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("435117")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-09-15 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":14 hdfs:///user/flink/hudi/public/nation_info/5f23eff2-16ba-499f-806d-6a0dd59777d5_0-1-0_20220915171415714.parquet\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoopmaster sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])])]),t("br"),s._v(" "),t("h2",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),t("ul",[t("li",[s._v("无")])])])}),[],!1,null,null,null);t.default=r.exports}}]);