(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{553:function(a,t,s){"use strict";s.r(t);var e=s(8),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"kafka安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka安装"}},[a._v("#")]),a._v(" kafka安装")]),a._v(" "),t("h2",{attrs:{id:"本内容你将获得"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[a._v("#")]),a._v(" 本内容你将获得")]),a._v(" "),t("ul",[t("li",[a._v("如何在 centos7 服务器上安装 kafka自带的zookeeper")]),a._v(" "),t("li",[a._v("如何在 centos7 服务器上安装 kafka")])]),a._v(" "),t("h2",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[a._v("#")]),a._v(" 部署")]),a._v(" "),t("p",[a._v("1、登录kafka官网,下载 "),t("a",{attrs:{href:"https://archive.apache.org/dist/kafka/3.2.0/kafka_2.12-3.2.0.tgz",target:"_blank",rel:"noopener noreferrer"}},[a._v("kafka_2.12-3.2.0.tgz"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("2、上传到服务器并解压")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@hadoopmaster")]),a._v(" tools"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("# tar "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("zxvf kafka_2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tgz\n")])])]),t("p",[a._v("3、配置zookeeper")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster tools"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd kafka_2.12-3.2.0                #进入kafka安装目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster kafka_2.12-3.2.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mkdir -p zk/data        #创建zookeeper数据存放目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster kafka_2.12-3.2.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mkdir -p zk/logs        #创建zookeeper日志存放目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster kafka_2.12-3.2.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd config/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cp zookeeper.properties zookeeper.properties.20220915bak")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# vi zookeeper.properties")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dataDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/kafka_2.12-3.2.0/zk/data                "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#修改数据存放目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dataLogDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/kafka_2.12-3.2.0/zk/logs/            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#增加日志存放目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# the port at which the clients will connect")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("clientPort")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# disable the per-ip limit on the number of connections since this is a non-production config")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("maxClientCnxns")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Disable the adminserver by default to avoid port conflicts.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Set the port to something non-conflicting if choosing to enable this")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("admin.enableServer")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# admin.serverPort=8080")]),a._v("\n")])])]),t("p",[a._v("4、配置kafka")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[root@hadoopmaster kafka_2.12-3.2.0]# mkdir logs\n[root@hadoopmaster kafka_2.12-3.2.0]# cd logs\n[root@hadoopmaster logs]# pwd\n/root/tools/kafka_2.12-3.2.0/log\n[root@hadoopmaster kafka_2.12-3.2.0]# cd ../conf\n[root@hadoopmaster kafka_2.12-3.2.0]# cd config\n[root@hadoopmaster config]# cp server.properties server.properties.20220915bak\n修改server.properties文件\n\n在#listeners=PLAINTEXT://:9092下面增加如下配置\nlisteners=PLAINTEXT://192.168.17.149:9092               #局域网地址\nadvertised.listeners=PLAINTEXT://192.168.17.149:9092    #公网地址\n\nlog.dirs=/tmp/kafka-logs                               #修改为 log.dirs=/root/tools/kafka_2.12-3.2.0/logs\n\nzookeeper.connect=localhost:2181                       #修改为 zookeeper.connect=192.168.17.149:2181\n\nzookeeper.session.timeout.ms=400000                    #增加此配置项\n\n")])])]),t("p",[a._v("5、启动")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster tools"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd /root/tools/kafka_2.12-3.2.0/bin")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#nohup sh  zookeeper-server-start.sh -daemon ../config/zookeeper.properties 1>/dev/null 2>&1 &  #启动zookeeper")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#nohup sh  kafka-server-start.sh -daemon ../config/server.properties  1>/dev/null 2>&1 &        #启动kafka")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# netstat -anlp |grep 2181                                             #检查zookeeper端口")]),a._v("\ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" :::2181                 :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21901")]),a._v("/java          \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:58404     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:2181      ESTABLISHED "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22263")]),a._v("/java          \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:2181      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:58404     ESTABLISHED "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21901")]),a._v("/java          \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# jps      #检查kafka进程是否启动")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12480")]),a._v(" DataNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20562")]),a._v(" Master\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12722")]),a._v(" SecondaryNameNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22355")]),a._v(" Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("13123")]),a._v(" NodeManager\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12339")]),a._v(" NameNode\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12980")]),a._v(" ResourceManager\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("13527")]),a._v(" JobHistoryServer\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22263")]),a._v(" Kafka\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20701")]),a._v(" Worker\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21901")]),a._v(" QuorumPeerMain\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n")])])]),t("p",[a._v("5、停止")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster tools"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd /root/tools/kafka_2.12-3.2.0/bin")]),a._v("\n./zookeeper-server-stop.sh    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#停止zookeeper")]),a._v("\n./kafka-server-stop.sh        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#停止kafka")]),a._v("\n")])])]),t("h2",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[a._v("#")]),a._v(" 其他")]),a._v(" "),t("ul",[t("li",[a._v("无")])])])}),[],!1,null,null,null);t.default=n.exports}}]);