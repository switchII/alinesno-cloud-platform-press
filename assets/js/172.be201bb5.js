(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{545:function(a,t,s){"use strict";s.r(t);var n=s(8),r=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"gitlab-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-安装"}},[a._v("#")]),a._v(" Gitlab 安装")]),a._v(" "),t("h2",{attrs:{id:"软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[a._v("#")]),a._v(" 软件安装")]),a._v(" "),t("h3",{attrs:{id:"上传rpm文件至-linux-服务器-home-alinesno-soft-目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传rpm文件至-linux-服务器-home-alinesno-soft-目录"}},[a._v("#")]),a._v(" 上传rpm文件至 Linux 服务器"),t("code",[a._v("/home/alinesno/soft/")]),a._v("目录")]),a._v(" "),t("blockquote",[t("p",[a._v("此处用户可以使用 xftp 或者 xshell 等工具，书要简言")])]),a._v(" "),t("h3",{attrs:{id:"安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装配置"}},[a._v("#")]),a._v(" 安装配置")]),a._v(" "),t("h4",{attrs:{id:"运行环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行环境配置"}},[a._v("#")]),a._v(" 运行环境配置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" policycoreutils-python openssh-server perl  // 安装依赖\n\n// 开启sshd服务\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" sshd\nsystemctl start sshd\n\n// 防火墙配置\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https\nsystemctl reload firewalld\n")])])]),t("h4",{attrs:{id:"安装gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装gitlab"}},[a._v("#")]),a._v(" 安装gitlab")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("安装\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v("  gitlab-ce-15.3.3-ce.0.el7.x86_64.rpm\n\n查看gitlab状态\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qi")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" gitlab"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])]),t("h4",{attrs:{id:"配置及启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置及启动"}},[a._v("#")]),a._v(" 配置及启动")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("配置端口及外部地址\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/gialab/gitlab.rb\n\n设置web端口\n添加  nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'listen_port'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("58801")]),a._v("  // 或找到  nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'listen_port'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 行\n\n设置外部地址\n修改  external_url "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'http://gitlab.example.com'")]),a._v(" 为 external_url "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'http://yourIp:58801'")]),a._v("  // 配置反向代理及域名的话根据实际情况配置\n\n配置生效\ngitlab-ctl reconfigure\n\n执行完后gitlab已经启动\n")])])]),t("h4",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动")]),a._v("\ngitlab-ctl start\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止")]),a._v("\ngitlab-ctl stop\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看各服务状态")]),a._v("\ngitlab-ctl status\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启停单一服务")]),a._v("\ngitlab-ctl start 服务名  // 启动\ngitlab-ctl stop 服务名  // 停止\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看运行日志")]),a._v("\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("服务"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("   // 例如 gitlab-ctl "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v(" nginx\n\n")])])]),t("h4",{attrs:{id:"登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[a._v("#")]),a._v(" 登录")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("获取管理员初始密码\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v("  /etc/gitlab/initial_root_password\n\n获取密码后用 root/密码 登录\n\n")])])]),t("img",{attrs:{src:"/operation/gitlab/01_gitlab.png",width:"70%"}}),a._v(" "),t("img",{attrs:{src:"/operation/gitlab/02_gitlab.png",width:"70%"}}),a._v(" "),t("h2",{attrs:{id:"其它"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[a._v("#")]),a._v(" 其它")]),a._v(" "),t("ul",[t("li",[a._v("无")])])])}),[],!1,null,null,null);t.default=r.exports}}]);