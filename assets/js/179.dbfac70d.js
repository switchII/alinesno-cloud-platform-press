(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{551:function(a,s,t){"use strict";t.r(s);var r=t(8),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"hive安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hive安装"}},[a._v("#")]),a._v(" hive安装")]),a._v(" "),s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[a._v("#")]),a._v(" 本内容你将获得")]),a._v(" "),s("ul",[s("li",[a._v("部署hive元数据库")]),a._v(" "),s("li",[a._v("部署hive")]),a._v(" "),s("li",[a._v("启动hive数据库")]),a._v(" "),s("li",[a._v("使用spark引擎")]),a._v(" "),s("li",[a._v("启停hive服务")])]),a._v(" "),s("h2",{attrs:{id:"软件安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[a._v("#")]),a._v(" 软件安装")]),a._v(" "),s("h4",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[a._v("#")]),a._v(" 说明")]),a._v(" "),s("ul",[s("li",[a._v("hive依赖Java、hadoop环境")]),a._v(" "),s("li",[a._v("hive元数据库用MySQL数据库")]),a._v(" "),s("li",[a._v("hive使用spark引擎，依赖spark环境")])]),a._v(" "),s("h3",{attrs:{id:"部署hive元数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署hive元数据库"}},[a._v("#")]),a._v(" 部署hive元数据库")]),a._v(" "),s("h5",{attrs:{id:"在服务器上新建mysql用户、用户组、设置密码、创建相关目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在服务器上新建mysql用户、用户组、设置密码、创建相关目录"}},[a._v("#")]),a._v(" 在服务器上新建mysql用户、用户组、设置密码、创建相关目录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("groupadd")]),a._v(" mysql\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /bin/bash mysql\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("passwd")]),a._v(" mysql\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" - mysql\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" data\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" mariadb \n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"修改my-cnf配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改my-cnf配置"}},[a._v("#")]),a._v(" 修改my.cnf配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /etc\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" my.cnf\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mysqld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#Mysql服务的唯一编号 每个mysql服务Id需唯一")]),a._v("\nserver-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022091400001")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#服务端口号 默认3306")]),a._v("\nport "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#mysql安装根目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("basedir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/mysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#mysql数据文件所在位置")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("datadir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/mysql/data\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#pid")]),a._v("\npid-file "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /home/mysql/mysql.pid\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#设置socke文件所在目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("socket")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/mysql/mysql.sock\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#设置临时目录")]),a._v("\ntmpdir "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /tmp\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户")]),a._v("\nuser "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" mysql\n\nsymbolic-links"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#开启日志")]),a._v("\nlog-bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql-bin\n\nbinlog-format"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ROW\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#忽略大小写")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("lower_case_table_names")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mysqld_safe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nlog-error"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/mysql/mariadb/mariadb.log\npid-file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/mysql/mariadb/mariadb.pid\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("socket")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/mysql/mysql.sock\n\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"上传mysql-8-0-28-1-el7-x86-64-rpm-bundle-tar到服务器-root-tools目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传mysql-8-0-28-1-el7-x86-64-rpm-bundle-tar到服务器-root-tools目录"}},[a._v("#")]),a._v(" 上传mysql-8.0.28-1.el7.x86_64.rpm-bundle.tar到服务器/root/tools目录")]),a._v(" "),s("p",[a._v("解压安装包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xvf")]),a._v(" mysql-8.0.28-1.el7.x86_64.rpm-bundle.tar\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"安装mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[a._v("#")]),a._v(" 安装mysql")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" mysql                                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#检查是否已安装过mysql,如有则先卸载并清除相关文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" - mysql                                                             "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#切换到mysql用户，以mysql用户部署hive元数据库")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-common-8.0.28-1.el7.x86_64.rpm           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装common")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-client-plugins-8.0.28-1.el7.x86_64.rpm   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装 client   ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-libs-8.0.28-1.el7.x86_64.rpm             "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装 libs")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-libs-8.0.28-1.el7.x86_64.rpm             "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重新安装libs")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-client-8.0.28-1.el7.x86_64.rpm           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装client ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v("  mysql-community-icu-data-files-8.0.28-1.el7.x86_64.rpm  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装 icu-data-files")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-server-8.0.28-1.el7.x86_64.rpm           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装 server")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" mysql-community-server-8.0.28-1.el7.x86_64.rpm           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重新安装 server")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" mysql                                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#确认mysql 的安装包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" mysqld --initialize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#初始化数据库")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" mysql:mysql /var/lib/mysql -R"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#授权 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start mysqld.service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动mysql数据库")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" mysqld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#来设置 mysql开机启动自动       ")]),a._v("\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"配置mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置mysql"}},[a._v("#")]),a._v(" 配置mysql")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" - mysql\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /var/log/mysqld.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" password      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看数据库的密码")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" root "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("                             "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#登陆数据库")]),a._v("\nALTER "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'root'")]),a._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'localhost'")]),a._v(" IDENTIFIED WITH mysql_native_password BY "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'qsdb%67$0l8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#修改数据库密码")]),a._v("\ncreate user "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'root'")]),a._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'%'")]),a._v(" identified with mysql_native_password by "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'qsdb%67$0l8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#创建root用户")]),a._v("\ngrant all privileges on *.* to "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'root'")]),a._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'%'")]),a._v(" with grant option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#远程访问授权")]),a._v("\nflush privileges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                                                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#刷新")]),a._v("\nshow variables like "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'log_bin'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                                       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看是否开启binlog功能")]),a._v("\nshow master logs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                                                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看binlog日志")]),a._v("\ncreate database hive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#创建hives数据库")]),a._v("\ngrant all privileges on *.* to "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'hive'")]),a._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'%'")]),a._v(" with grant option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#授权远程访问：")]),a._v("\nflush privileges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("                                                                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#刷新")]),a._v("\n")])])]),s("h3",{attrs:{id:"部署hive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署hive"}},[a._v("#")]),a._v(" 部署hive")]),a._v(" "),s("p",[a._v("以root用户安装hive")]),a._v(" "),s("h5",{attrs:{id:"上传apache-hive-3-1-3-bin-tar-gz到服务器-root-tools目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传apache-hive-3-1-3-bin-tar-gz到服务器-root-tools目录"}},[a._v("#")]),a._v(" 上传apache-hive-3.1.3-bin.tar.gz到服务器/root/tools目录")]),a._v(" "),s("p",[a._v("解压安装包")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" apache-hive-3.1.3-bin.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" apache-hive-3.1.3-bin   hive-3.1.3   \n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"创建hive的临时目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建hive的临时目录"}},[a._v("#")]),a._v(" 创建hive的临时目录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/hiveTemp/operation_logs\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/hiveTemp/download\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"配置hive的环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置hive的环境变量"}},[a._v("#")]),a._v(" 配置hive的环境变量")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#hive")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HIVE_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hive-3.1.3\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HIVE_CONF_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HIVE_HOME")]),a._v("/conf \n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HIVE_HOME")]),a._v("/sbin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HIVE_HOME")]),a._v("/bin\n")])])]),s("p",[a._v("保存后，source /etc/profile 使配置生效")]),a._v(" "),s("br"),a._v(" "),s("h5",{attrs:{id:"上传mysql数据库java连接包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传mysql数据库java连接包"}},[a._v("#")]),a._v(" 上传mysql数据库java连接包")]),a._v(" "),s("p",[a._v("网上下载mysql-connector-java-8.0.28.jar,上传到hive的lib目录")]),a._v(" "),s("br"),a._v(" "),s("h5",{attrs:{id:"复制如下spark的jar文件到hive的lib目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#复制如下spark的jar文件到hive的lib目录"}},[a._v("#")]),a._v(" 复制如下spark的jar文件到hive的lib目录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/spark-2.4.8-pure/jars\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" scala-compiler-2.12.10.jar /root/tools/hive-3.1.3/lib\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" scala-library-2.12.10.jar /root/tools/hive-3.1.3/lib\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" scala-reflect-2.12.10.jar /root/tools/hive-3.1.3/lib\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" spark-core_2.12-2.4.8.jar /root/tools/hive-3.1.3/lib\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" spark-network-common_2.12-2.4.8.jar /root/tools/hive-3.1.3/lib\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" spark-unsafe_2.12-2.4.8.jar /root/tools/hive-3.1.3/lib\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" spark-yarn_2.12-2.4.8.jar /root/tools/hive-3.1.3/lib\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"上传hive的orc-core-1-5-8-jar到hdfs文件系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传hive的orc-core-1-5-8-jar到hdfs文件系统"}},[a._v("#")]),a._v(" 上传hive的orc-core-1.5.8.jar到hdfs文件系统")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /root/tools/hive-3.1.3/lib\nhdfs dfs -put orc-core-1.5.8.jar /spark2-jars\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"配置hive-env-sh-在文件后面增加配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置hive-env-sh-在文件后面增加配置"}},[a._v("#")]),a._v(" 配置hive-env.sh，在文件后面增加配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hive-3.1.3/conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" hive-env.sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#hadoop_home路径")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hadoop-3.3.4\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#hive配置文件存放路径")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HIVE_CONF_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hive-3.1.3/conf\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#hive相关jar存放路径")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HIVE_AUX_JARS_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hive-3.1.3/lib\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 新增SPARK_HOME 必须是without-hadoop 的纯净版")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SPARK_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/spark-2.4.8-pure\n\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"配置hive-site-xml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置hive-site-xml"}},[a._v("#")]),a._v(" 配置hive-site.xml")]),a._v(" "),s("p",[a._v("增加配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hive-3.1.3/conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" hive-site.xml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#在hive-site.xml的后面增加如下配置")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.master"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark://192.168.17.149:707"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("7")]),a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.enable.spark.execution.engine"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("true"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.home"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/root/tools/spark-2.4.8-pure"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.enentLog.enabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("true"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.enentLog.dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:9000/spark-logs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.serializer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("org.apache.spark.serializer.KryoSerializer"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.executor.extraJavaOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("-XX:+PrintGCDetails "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dkey")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dnumbers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"one two three"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("-- Spark3 依赖库位置，在YARN 上运行的任务需要从HDFS 中查找依赖jar 文件 --"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.yarn.jars"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:9000/spark2-jars/*"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("-- Hive3 和Spark2 连接超时时间 --"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.spark.client.connect.timeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("10000ms"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n   \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--Spark端口 --"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("spark.driver.port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("707")]),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("7")]),a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  \n")])])]),s("p",[a._v("修改配置")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#在hive-site.xml中修改配置")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.exec.scratchdir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:9000/data/hive/tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧： <value>/tmp/hive</value>     ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.exec.local.scratchdir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/root/hiveTemp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧： ${system:java.io.tmpdir}/${system:user.name}")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.downloaded.resources.dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/root/hiveTemp/download"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：${system:java.io.tmpdir}/${hive.session.id}_resources")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.metastore.warehouse.dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:9000/data/hive/warehouse"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：/user/hive/warehouse           ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n   \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("javax.jdo.option.ConnectionPassword"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧： mine")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("qsdb%67"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$0l8")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                              \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("javax.jdo.option.ConnectionURL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("jdbc:mysql://192.168.17.149:3306/hive"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：jdbc:derby:;databaseName=metastore_db;create=true ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.metastore.event.db.notification.api.auth"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("false"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：true           ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("javax.jdo.option.ConnectionDriverName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("com.mysql.jdbc.Driver"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：org.apache.derby.jdbc.EmbeddedDriver  ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("javax.jdo.option.ConnectionUserName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：APP                 ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.querylog.location"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:9000/data/hive/log"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：${system:java.io.tmpdir}/${system:user.name}  ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.stats.dbclass"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("jdbc:msyql"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：fs                         ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.server2.active.passive.ha.enable"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("true"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("                                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧： false                        ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hive.server2.logging.operation.log.location"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/root/hiveTemp/operation_logs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#旧：${system:java.io.tmpdir}/${system:user.name}/operation_logs  ")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#由于xml中的&需要转义，将hive-site.xml出现的&修改成&amp;")]),a._v("\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"创建hive-site-xml-中需要的hdfs目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建hive-site-xml-中需要的hdfs目录"}},[a._v("#")]),a._v(" 创建hive-site.xml 中需要的hdfs目录")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("hadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /data\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /data/hive\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /data/hive/warehouse\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /data/hive/tmp\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /data/hive/log\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /spark-logs\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mkdir")]),a._v(" /spark2-history\nhadoop fs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-chmod")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("777")]),a._v(" /\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"创建spark-defaults-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建spark-defaults-conf"}},[a._v("#")]),a._v(" 创建spark-defaults.conf")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hive-3.1.3/conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" spark-defaults.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" spark-defaults.conf\n\nspark.master              "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启用日志聚合")]),a._v("\nspark.eventLog.enabled    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 保存日志的HDFS 路径")]),a._v("\nspark.eventLog.dir        hdfs://192.168.17.149:9000/spark2-history\nspark.executor.memory     1g\nspark.driver.memory       1g\n\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"初始化hive元数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化hive元数据库"}},[a._v("#")]),a._v(" 初始化hive元数据库")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hive-3.1.3/bin\nschematool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dbType")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-initSchema")]),a._v("\n")])])]),s("br"),a._v(" "),s("h5",{attrs:{id:"修改hive元数据库的注释字符集为utf8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改hive元数据库的注释字符集为utf8"}},[a._v("#")]),a._v(" 修改hive元数据库的注释字符集为UTF8")]),a._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mysql -u root -p \nuse hive;\nalter table COLUMNS_V2 modify column COMMENT varchar(256) character set utf8;             #修改为utf8字符集\nalter table TABLE_PARAMS modify column PARAM_VALUE mediumtext character set utf8;         #修改为utf8字符集\nalter table PARTITION_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;  #修改为utf8字符集\nalter table PARTITION_KEYS modify column PKEY_COMMENT varchar(4000) character set utf8;   #修改为utf8字符集\n")])])]),s("br"),a._v(" "),s("h3",{attrs:{id:"启动hive数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动hive数据库"}},[a._v("#")]),a._v(" 启动hive数据库")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("hive\nshow databases"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" hive.execution.engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看当前引擎")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("hive.execution.engine")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#切换执行引擎，设置spark引擎")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("hive.execution.engine")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#切换执行引擎，设置mr引擎")]),a._v("\n")])])]),s("br"),a._v(" "),s("h3",{attrs:{id:"使用spark引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用spark引擎"}},[a._v("#")]),a._v(" 使用spark引擎")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" spark-2.4.8-pure                            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#进入spark目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" sbin                                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#进入sbin目录")]),a._v("\n ./start-all.sh                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动spark")]),a._v("\nhive                                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#进入hive数据库")]),a._v("\ncreate table student"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#创建表")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" bigint, \n  name string,\n  age  int "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nROW FORMAT SERDE \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe'")]),a._v(" \nWITH SERDEPROPERTIES "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'field.delim'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'|'")]),a._v(", \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'serialization.format'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'|'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" \nSTORED AS INPUTFORMAT \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.mapred.TextInputFormat'")]),a._v(" \nOUTPUTFORMAT \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("hive.execution.engine")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#设置spark引擎")]),a._v("\ninsert into student values "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wangwu"')]),a._v(",18"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#插入数据,执行过程中会出现Hive on Spark 日志")]),a._v("\n")])])]),s("br"),a._v(" "),s("h3",{attrs:{id:"启停hive服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启停hive服务"}},[a._v("#")]),a._v(" 启停hive服务")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动元数据服务 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" hive "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--service")]),a._v(" metastore "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##元数据服务       netstat -anlp |grep 9083   重启前杀掉进程再启动")]),a._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动hiveserver2服务 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" hive "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--service")]),a._v(" hiveserver2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##用于jdbc查询服务 netstat -anlp |grep 10000   重启前杀掉进程再启动")]),a._v("\n")])])]),s("br"),a._v(" "),s("h2",{attrs:{id:"其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[a._v("#")]),a._v(" 其他")]),a._v(" "),s("ul",[s("li",[a._v("无")])])])}),[],!1,null,null,null);s.default=e.exports}}]);