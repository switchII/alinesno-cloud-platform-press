(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{544:function(t,s,a){"use strict";a.r(s);var n=a(8),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"制作和使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#制作和使用"}},[t._v("#")]),t._v(" 制作和使用")]),t._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("p",[t._v("使用 docker-build，结合阿里云镜像仓库（300 个人免费仓库）")]),t._v(" "),s("h2",{attrs:{id:"推荐镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#推荐镜像"}},[t._v("#")]),t._v(" 推荐镜像")]),t._v(" "),s("p",[t._v("基础服务镜像，以下为常用的基础镜像，生产和测试使用，做为一些优化处理")]),t._v(" "),s("p",[t._v("注意说明：")]),t._v(" "),s("ul",[s("li",[t._v("开发 指建议在开发过程使用，包含有调试的工具，镜像相对比较大，在1.5G左右")]),t._v(" "),s("li",[t._v("生产指的是最小镜像，带有非root账号信息(alinesno)，不包含调试工具，镜像相对比较小，jdk不超过500M")]),t._v(" "),s("li",[t._v("发布生产上建议使用最小镜像，同时非root账号运行")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("序号")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("镜像")]),t._v(" "),s("th",[t._v("场景")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("运行")]),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/openjdk11:11.0.9")]),t._v(" "),s("td",[t._v("开发")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/openjdk8:latest")]),t._v(" "),s("td",[t._v("开发")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-cloud-base/openjdk:11.0.16-jdk-slim")]),t._v(" "),s("td",[t._v("生产")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-cloud-base/openjdk:17-jdk-alpine")]),t._v(" "),s("td",[t._v("生产")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-cloud-base/openjdk:arm64v8-11-oraclelinux-8")]),t._v(" "),s("td",[t._v("开发(针对于arm64v8环境)")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("中间件")]),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/mysql:8.0.18")]),t._v(" "),s("td",[t._v("开发")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/redis:latest")]),t._v(" "),s("td",[t._v("开发")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/nginx-alpha:1.1.4")]),t._v(" "),s("td",[t._v("生产")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/minio:latest")]),t._v(" "),s("td",[t._v("开发")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("运维")]),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-base/openjdk11-ansible:1.2.0")]),t._v(" "),s("td",[t._v("开发")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("registry.cn-shenzhen.aliyuncs.com/alinesno-cloud-base/alinesno-container-ops-prometheus:0.1.0-2.37.1")]),t._v(" "),s("td",[t._v("生产")])])])]),t._v(" "),s("h2",{attrs:{id:"构建脚本如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建脚本如下"}},[t._v("#")]),t._v(" 构建脚本如下：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建基础yolov5学习环境镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 先登陆阿里云镜像仓库")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 接收指定环境参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"当前版本为:'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VER")]),t._v('"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 构建镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" registry-vpc.cn-shenzhen.aliyuncs.com/alinesno-base/vision-yolov5-base:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VER")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 推送镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" push registry-vpc.cn-shenzhen.aliyuncs.com/alinesno-base/vision-yolov5-base:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$VER")]),t._v("\n")])])]),s("h2",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它")]),t._v(" "),s("ul",[s("li",[t._v("无")])])])}),[],!1,null,null,null);s.default=e.exports}}]);