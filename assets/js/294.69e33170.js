(window.webpackJsonp=window.webpackJsonp||[]).push([[294],{669:function(a,s,t){"use strict";t.r(s);var e=t(8),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"微服务网关认证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务网关认证"}},[a._v("#")]),a._v(" 微服务网关认证")]),a._v(" "),s("p",[a._v("工程示例\n系统应用单点集成示例工程"),s("a",{attrs:{href:"#"}},[a._v("待集成")])]),a._v(" "),s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[a._v("#")]),a._v(" 本内容你将获得")]),a._v(" "),s("ul",[s("li",[a._v("微服务网关认证场景")]),a._v(" "),s("li",[a._v("基于oauth2的微服务网关认证")]),a._v(" "),s("li",[a._v("配置微服务网关示例")])]),a._v(" "),s("h2",{attrs:{id:"认证流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#认证流程"}},[a._v("#")]),a._v(" 认证流程")]),a._v(" "),s("p",[a._v("结合网关结构进行认证，做为微服务统一授权入口：")]),a._v(" "),s("img",{attrs:{src:"/sso/gateway_oauth2.png",width:"70%"}}),a._v(" "),s("p",[a._v("流程说明：")]),a._v(" "),s("ul",[s("li",[a._v("客户端通过网关请求服务")]),a._v(" "),s("li",[a._v("API网关服务通过去oauth2授权中心获取token")]),a._v(" "),s("li",[a._v("客户端带着token访问各个子服务接口")])]),a._v(" "),s("h2",{attrs:{id:"认证流程-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#认证流程-2"}},[a._v("#")]),a._v(" 认证流程")]),a._v(" "),s("p",[a._v("这里描述两种方案，一种即原有团队的gateway集成的方案，另一种是使用ACP网关的方案，整体如下：")]),a._v(" "),s("h3",{attrs:{id:"项目功能配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目功能配置"}},[a._v("#")]),a._v(" 项目功能配置")]),a._v(" "),s("p",[a._v("在认证平台添加应用，获取到密钥，如下图：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("获取到key和sec:\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("xxx\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("sec")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("xxxx\n")])])]),s("p",[a._v("在gateway中获取认证示例代码，这里查看认证的示例代码：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("\n")])])]),s("p",[a._v("acp已经默认集成了oauth2的认证集成，结合acp网关认证配置代码：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("\n")])])]),s("h3",{attrs:{id:"认证验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#认证验证"}},[a._v("#")]),a._v(" 认证验证")]),a._v(" "),s("p",[a._v("以下为以acp网关平台为示例，请求获取accessToken，如下：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" http://\n")])])]),s("p",[a._v("请求网关配置:")]),a._v(" "),s("h2",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[a._v("#")]),a._v(" 其它")]),a._v(" "),s("ul",[s("li",[a._v("无")])])])}),[],!1,null,null,null);s.default=r.exports}}]);