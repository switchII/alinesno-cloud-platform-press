(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{546:function(s,a,t){"use strict";t.r(a);var e=t(8),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"flink-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flink-安装"}},[s._v("#")]),s._v(" flink 安装")]),s._v(" "),a("h2",{attrs:{id:"本内容你将获得"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[s._v("#")]),s._v(" 本内容你将获得")]),s._v(" "),a("ul",[a("li",[s._v("在 centos7 上安装 flink")])]),s._v(" "),a("h2",{attrs:{id:"软件安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[s._v("#")]),s._v(" 软件安装")]),s._v(" "),a("h5",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),a("ul",[a("li",[s._v("flink依赖scala环境")])]),s._v(" "),a("h3",{attrs:{id:"安装开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装开始"}},[s._v("#")]),s._v(" 安装开始")]),s._v(" "),a("h5",{attrs:{id:"上传flink-1-14-5-bin-scala-2-12-tgz到服务器-root-tools目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传flink-1-14-5-bin-scala-2-12-tgz到服务器-root-tools目录"}},[s._v("#")]),s._v(" 上传flink-1.14.5-bin-scala_2.12.tgz到服务器/root/tools目录")]),s._v(" "),a("p",[s._v("解压安装包")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" flink-1.14.5-bin-scala_2.12.tgz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" flink-1.14.5-bin-scala_2.12 flink-1.14.5\n")])])]),a("h5",{attrs:{id:"创建临时目录文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建临时目录文件"}},[s._v("#")]),s._v(" 创建临时目录文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /root/flink/tmp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /root/flink/flink-1.14.5/tmp/zookeeper\n")])])]),a("h5",{attrs:{id:"修改flink-conf-yaml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改flink-conf-yaml"}},[s._v("#")]),s._v(" 修改flink-conf.yaml")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/flink-1.14.5/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" flink-conf.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改以下内容为8")]),s._v("\ntaskmanager.numberOfTaskSlots: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# state.backend: filesystem  # 在下面增加")]),s._v("\nstate.backend: rocksdb  \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# classloader.resolve-order: child-first # 在下面增加")]),s._v("\nclassloader.resolve-order: parent-first\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fs.default-scheme # 在下面增加")]),s._v("\nfs.default-scheme: hdfs:192.168.17.149:9000\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#rest.port: 8081  # 在下面增加")]),s._v("\nrest.port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8083")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# taskmanager.memory.flink.size: 1280m 修改为")]),s._v("\ntaskmanager.memory.flink.size: 1280m\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在文件末尾增加")]),s._v("\nclassloader.check-leaked-classloader: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\ntaskmanager.host: localhost\n")])])]),a("h5",{attrs:{id:"修改zoo-cfg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改zoo-cfg"}},[s._v("#")]),s._v(" 修改zoo.cfg")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/flink-1.14.5/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" zoo.cfg\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dataDir=/tmp/zookeeper # 在下面增加")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/flink/flink-1.14.5/tmp/zookeeper\n")])])]),a("h5",{attrs:{id:"修改masters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改masters"}},[s._v("#")]),s._v(" 修改masters")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/flink-1.14.5/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" masters\nlocalhost:8083    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改localhost:8081为8083，与flink-conf.yaml中修改后的rest.port一致")]),s._v("\n")])])]),a("h5",{attrs:{id:"复制-hadoop-集群配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复制-hadoop-集群配置文件"}},[s._v("#")]),s._v(" 复制 hadoop 集群配置文件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("//etc/hadoop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" hdfs-site.xml /root/tools/flink-1.14.5/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" core-site.xml /root/tools/flink-1.14.5/conf\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/hive-3.1.3/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" hive-site.xml /root/tools/flink-1.14.5/conf\n")])])]),a("h5",{attrs:{id:"启停"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启停"}},[s._v("#")]),s._v(" 启停")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/tools/flink-1.14.5/bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_CLASSPATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$HADOOP_HOME/bin/hadoop classpath"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./start-cluster.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("                                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动集群")]),s._v("\n./stop-cluster.sh                                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止集群")]),s._v("\n./sql-client.sh embedded                                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动flinksql命令行工具 ")]),s._v("\n")])])]),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),a("ul",[a("li",[s._v("无")])])])}),[],!1,null,null,null);a.default=n.exports}}]);