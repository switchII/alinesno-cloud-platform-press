(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{551:function(a,t,s){"use strict";s.r(t);var r=s(8),e=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"hadoop安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop安装"}},[a._v("#")]),a._v(" hadoop安装")]),a._v(" "),t("h2",{attrs:{id:"本内容你将获得"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[a._v("#")]),a._v(" 本内容你将获得")]),a._v(" "),t("ul",[t("li",[a._v("hadoop安装环境准备")]),a._v(" "),t("li",[a._v("Hadoop安装包上传")]),a._v(" "),t("li",[a._v("CenOS7上安装Hadoop")]),a._v(" "),t("li",[a._v("验证Hadoop安装")])]),a._v(" "),t("h2",{attrs:{id:"软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[a._v("#")]),a._v(" 软件安装")]),a._v(" "),t("h4",{attrs:{id:"说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[a._v("#")]),a._v(" 说明")]),a._v(" "),t("ul",[t("li",[a._v("hadoop依赖 Java环境")])]),a._v(" "),t("br"),a._v(" "),t("h3",{attrs:{id:"环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),t("h5",{attrs:{id:"设置免密登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置免密登录"}},[a._v("#")]),a._v(" 设置免密登录")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装时进行文件分发")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root\nssh-keygen "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" rsa\nssh-copy-id "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" root@localhost\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"设置hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置hosts"}},[a._v("#")]),a._v(" 设置hosts")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /etc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" hosts\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149 hadoopmaster\n")])])]),t("p",[a._v("保存后，ping hadoopmaster 进行网络测试")]),a._v(" "),t("h5",{attrs:{id:"设置hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置hostname"}},[a._v("#")]),a._v(" 设置hostname")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /etc\nvi hostname\nhadoopmaster\n")])])]),t("p",[a._v("保存后reboot服务器使设置的主机名生效")]),a._v(" "),t("br"),a._v(" "),t("h3",{attrs:{id:"安装包上传"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装包上传"}},[a._v("#")]),a._v(" 安装包上传")]),a._v(" "),t("h5",{attrs:{id:"上传hadoop-3-3-4-tar-gz到服务器-root-tools目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传hadoop-3-3-4-tar-gz到服务器-root-tools目录"}},[a._v("#")]),a._v(" 上传hadoop-3.3.4.tar.gz到服务器/root/tools目录")]),a._v(" "),t("p",[a._v("解压安装包")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xzvf")]),a._v(" hadoop-3.3.4.tar.gz\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"上传jdk-8u333-linux-x64-tar-gz到服务器-root-tools目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传jdk-8u333-linux-x64-tar-gz到服务器-root-tools目录"}},[a._v("#")]),a._v(" 上传jdk-8u333-linux-x64.tar.gz到服务器/root/tools目录")]),a._v(" "),t("p",[a._v("解压JDK包")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xzvf")]),a._v(" jdk-8u333-linux-x64.tar.gz\n")])])]),t("p",[a._v("配置JAVA_HOME环境变量")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/jdk1.8.0_333\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JRE_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/jre\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(".:"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/jre/lib:"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/lib:"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/lib/tools.jar\n")])])]),t("p",[a._v("保存后，source /etc/profile 使配置生效")]),a._v(" "),t("br"),a._v(" "),t("h3",{attrs:{id:"安装开始"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装开始"}},[a._v("#")]),a._v(" 安装开始")]),a._v(" "),t("h5",{attrs:{id:"配置hadoop环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置hadoop环境变量"}},[a._v("#")]),a._v(" 配置hadoop环境变量")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# HADOOP env variables")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HDFS_NAMENODE_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HDFS_DATANODE_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HDFS_SECONDARYNAMENODE_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("YARN_RESOURCEMANAGER_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("YARN_NODEMANAGER_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hadoop-3.3.4\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_COMMON_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_HDFS_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_MAPRED_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_YARN_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-Djava.library.path='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v('/lib/native"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_COMMON_LIB_NATIVE_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("/lib/native\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("/sbin:"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$HADOOP_HOME")]),a._v("/bin\n")])])]),t("p",[a._v("保存后，source /etc/profile 使配置生效")]),a._v(" "),t("br"),a._v(" "),t("h5",{attrs:{id:"修改core-site-xml-在-configuration-中增加如下-property"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改core-site-xml-在-configuration-中增加如下-property"}},[a._v("#")]),a._v(" 修改core-site.xml,在<configuration>中增加如下<property>")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" core-site.xml\n   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("fs.default.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:900"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hadoop.proxyuser.root.groups"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("*"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("description"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("Allow the superuser oozie to impersonate any members of the group group1 and group"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v("<")]),a._v("/description"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hadoop.proxyuser.root.hosts"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("*"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("description"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("The superuser can connect only from host1 and host2 to impersonate a user"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/description"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"修改-hdfs-site-xml-在-configuration-中增加如下-property"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-hdfs-site-xml-在-configuration-中增加如下-property"}},[a._v("#")]),a._v(" 修改 hdfs-site.xml,在<configuration>中增加如下<property>")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" hdfs-site.xml\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("dfs.namenode.name.dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/root/hadoop_store/hdfs/namenode"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("dfs.datanode.data.dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/root/hadoop_store/hdfs/datanode"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("dfs.http.address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:5007"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n")])])]),t("p",[a._v("保存后，创建对应的目录")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/hadoop_store/hdfs/namenode2\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /root/hadoop_store/hdfs/datanode2\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"修改mapred-site-xml-在-configuration-中增加如下-property"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改mapred-site-xml-在-configuration-中增加如下-property"}},[a._v("#")]),a._v(" 修改mapred-site.xml,在<configuration>中增加如下<property>")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" mapred-site.xml\n\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce.framework.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce.job.tracker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("hdfs://192.168.17.149:800"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("final"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/final"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.app.mapreduce.am.env"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("HADOOP_MAPRED_HOME"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hadoop-3.3."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("4")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce.map.env"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("HADOOP_MAPRED_HOME"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hadoop-3.3."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("4")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce.reduce.env"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("HADOOP_MAPRED_HOME"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/hadoop-3.3."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("4")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  开启jobhistory服务--"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce.jobhistory.address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:1002"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce.jobhistory.webapp.address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:1988"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("8")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"修改yarn-site-xml-在-configuration-中增加如下-property"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改yarn-site-xml-在-configuration-中增加如下-property"}},[a._v("#")]),a._v(" 修改yarn-site.xml,在<configuration>中增加如下<property>")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" yarn-site.xml\n\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  为mr程序提供shuffle服务 --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.nodemanager.aux-services"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("mapreduce_shuffle"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.nodemanager.aux-services.mapreduce.shuffle.class"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("org.apache.hadoop.mapred.ShuffleHandler"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.resourcemanager.resource-tracker.address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:802"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("5")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.resourcemanager.scheduler.address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:803"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.resourcemanager.address"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.149:805"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--日志聚集  --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.log-aggregation-enable"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("-- 日志信息保存在文件系统上的最长时间  秒为单位--"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.log-aggregation.retain-seconds"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("64080")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("-- Site specific YARN configuration properties --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  resource,manager主节点所在机器 --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.resourcemanager.hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".17.14"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("9")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  一台NodeManager的总可用内存资源 --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.nodemanager.resource.memory-mb"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1228")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("8")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  一台NodeManager的总可用（逻辑）cpu核数 --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.nodemanager.resource.cpu-vcores"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("4")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  是否检查容器的虚拟内存使用超标情况 --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.nodemanager.vmem-check-enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("false"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  容器的虚拟内存使用上限：与物理内存的比率 --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.nodemanager.vmem-pmem-ratio"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  container内存按照默认大小配置，即为最小1G，最大8G --"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.scheduler.minimum-allocation-mb"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("102")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("4")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.scheduler.maximum-allocation-mb"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("819")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("--  开启jobhistory服务--"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("yarn.log.server.url"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("http://192.168.17.149:19888/jobhistory/logs/"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/value"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("/property"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"修改hadoop-env-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改hadoop-env-sh"}},[a._v("#")]),a._v(" 修改hadoop-env.sh")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" hadoop-env.sh\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  JAVA_HOME=/usr/java/testing hdfs dfs -ls  #设置JAVA_HOME")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/root/tools/jdk1.8.0_333\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# export HADOOP_HEAPSIZE_MAX=                #设置HADOOP_HEAPSIZE ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#\x3c!--  设置hadoop heap 大小--\x3e")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HADOOP_HEAPSIZE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6000")]),a._v("\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"修改yarn-env-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改yarn-env-sh"}},[a._v("#")]),a._v(" 修改yarn-env.sh")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" yarn-env.sh\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("YARN_HEAPSIZE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6000")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#在文件最后增加YARN_HEAPSIZE配置")]),a._v("\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"在namenode服务器上进行格式化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在namenode服务器上进行格式化"}},[a._v("#")]),a._v(" 在nameNode服务器上进行格式化")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hadoopmaster hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# hdfs namenode -format     #日志中出现如下提示，说明格式化成功")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("-09-14 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(":00:06,267 INFO common.Storage: Storage directory /root/hadoop_store/hdfs/namenode2 has been successfully formatted\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"启停"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启停"}},[a._v("#")]),a._v(" 启停")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /root/tools/hadoop-3.3.4/sbin\n./start-all.sh   --启动hadoop服务\n./stop-all.sh    --停止hadoop服务\n./mr-jobhistory-daemon.sh start historyserver  --启动yarn日志功能\n./mr-jobhistory-daemon.sh stop historyserver   --停止yarn日志功能\n")])])]),t("br"),a._v(" "),t("h3",{attrs:{id:"验证安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[a._v("#")]),a._v(" 验证安装")]),a._v(" "),t("p",[a._v("访问前端界面，验证安装是否成功")]),a._v(" "),t("h5",{attrs:{id:"开放防火墙端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放防火墙端口"}},[a._v("#")]),a._v(" 开放防火墙端口")]),a._v(" "),t("p",[a._v("如服务器开启防火墙，开放hadoop如下端口")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("--hadoop前端端口\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50070")]),a._v("/tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("   \nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8088")]),a._v("/tcp  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("   \nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("19888")]),a._v("/tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("    \n\n--刷新防火墙\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--reload")]),a._v("\n\n")])])]),t("br"),a._v(" "),t("h5",{attrs:{id:"hadoop前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop前端"}},[a._v("#")]),a._v(" hadoop前端")]),a._v(" "),t("p",[a._v("网址: http://ip:50070")]),a._v(" "),t("img",{attrs:{src:a.$withBase("/operation/hadoop-001.png")}}),a._v(" "),t("br"),a._v(" "),t("h5",{attrs:{id:"yarn前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn前端"}},[a._v("#")]),a._v(" yarn前端")]),a._v(" "),t("p",[a._v("网址: http://ip:8088")]),a._v(" "),t("img",{attrs:{src:a.$withBase("/operation/hadoop-002.png")}}),a._v(" "),t("br"),a._v(" "),t("h5",{attrs:{id:"yarn历史前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn历史前端"}},[a._v("#")]),a._v(" yarn历史前端")]),a._v(" "),t("p",[a._v("网址: http://ip:19888")]),a._v(" "),t("img",{attrs:{src:a.$withBase("/operation/hadoop-003.png")}}),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[a._v("#")]),a._v(" 其他")]),a._v(" "),t("ul",[t("li",[a._v("无")])])])}),[],!1,null,null,null);t.default=e.exports}}]);