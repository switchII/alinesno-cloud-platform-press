(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{532:function(s,a,t){"use strict";t.r(a);var n=t(8),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jenkins-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装"}},[s._v("#")]),s._v(" Jenkins 安装")]),s._v(" "),a("h2",{attrs:{id:"本内容你将获得"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[s._v("#")]),s._v(" 本内容你将获得")]),s._v(" "),a("ul",[a("li",[s._v("Jenkins 安装及插件配置")])]),s._v(" "),a("h2",{attrs:{id:"jenkins-安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装-2"}},[s._v("#")]),s._v(" Jenkins 安装")]),s._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),a("p",[s._v("1.Jenkins 本身是没有数据库的,以"),a("code",[s._v("JENKINS_HOME")]),s._v("为环境变量,构建的包都会在这个目录下面，所以可能会变得非常大(几十上百 G 都有可能)")]),s._v(" "),a("p",[s._v("2.Jenkins 构建过程中，使用的内存还有环境要求较高，建议使用 jdk8 运行")]),s._v(" "),a("p",[s._v("3.Jenkins 安装包推荐使用官网的长期支持版本 (LTS)，避免出现插件无法安装的情况")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_17.png")}}),s._v(" "),a("h3",{attrs:{id:"全局安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局安装"}},[s._v("#")]),s._v(" 全局安装")]),s._v(" "),a("p",[s._v("上传 Jenkins 至 Linux 服务器"),a("code",[s._v("/home/alinesno/jenkins")]),s._v("目录")]),s._v(" "),a("blockquote",[a("p",[s._v("此处用户可以使用 xftp 或者 xshell 等工具，书要简言")])]),s._v(" "),a("p",[s._v("解压")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" ~/jenkins/JENKINS_HOME\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/jenkins\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" jenkins.war jenkins.war\n")])])]),a("p",[s._v("配置环境变量(可选操作)")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/.bash_profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加以下内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jenkins env")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),s._v("/jenkins/JENKINS_HOME\n")])])]),a("p",[s._v("启动命令\n创建"),a("code",[s._v("jenkins_start.sh")]),s._v("启动脚本")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/jenkins/jenkins-start.sh\n")])])]),a("p",[s._v("内容如下")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jenkins env")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),s._v("/jenkins/JENKINS_HOME\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOGFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jenkins.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dhudson.util.ProcessTree.disable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" ~/jenkins/jenkins.war "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--httpPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOGFILE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("p",[s._v("启动 jenkins")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/jenkins\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加可执行权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x jenkins-start.sh\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n~/jenkins/jenkins-start.sh\n")])])]),a("p",[s._v("查看启动日志")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" ~/jenkins.log\n")])])]),a("p",[s._v("在启动日志中包含有管理员密钥，请注意复制下来，如果没有看到日志也没事，可以通过以下方式获取")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_02.png")}}),s._v(" "),a("h3",{attrs:{id:"登陆配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登陆配置"}},[s._v("#")]),s._v(" 登陆配置")]),s._v(" "),a("p",[s._v("访问 jenkins，http://192.168.1.110:8088 ,显示下图:")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_01.png")}}),s._v(" "),a("p",[s._v("需要获取安装的密钥，在服务器上面获取，复制到输入框中，点击继续")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /home/alinesno/jenkins/JENKINS_HOME/secrets/initialAdminPassword\n")])])]),a("p",[s._v("插件安装我们选择社区推荐插件即可，进入到插件安装过程时间比较长，也比较消耗服务器资源，请耐心等待.")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_03.png")}}),s._v(" "),a("p",[s._v("配置超级管理员，超级管理员会看到很多项目，并不合适于大型或者多项目的协助，后期我们为每个账户分配权限即可,超级管理员只用于配置，并不用于工程的发布。")]),s._v(" "),a("blockquote",[a("p",[s._v("这里设置超级管理员密码为:1234qwer")])]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_04.png")}}),s._v(" "),a("p",[s._v("配置完成，点击登陆即可")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_05.png")}}),s._v(" "),a("h3",{attrs:{id:"jenkins-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-配置"}},[s._v("#")]),s._v(" Jenkins 配置")]),s._v(" "),a("blockquote",[a("p",[s._v("Jenkins 是一个构建工具，需要引用的环境的工具，如 maven,jdk,node 等")])]),s._v(" "),a("h4",{attrs:{id:"配置开发工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置开发工具"}},[s._v("#")]),s._v(" 配置开发工具")]),s._v(" "),a("p",[s._v("Jenkins 可以配置多个 jdk 供用户在构建过程中提供选择，此处我们统一了 jdk 版本，所以只需要配置一个即可")]),s._v(" "),a("p",[s._v("进入系统设置中")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_06.png")}}),s._v(" "),a("p",[s._v("配置 jdk 路径,"),a("em",[s._v("一定不要勾选自动安装")])]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_07.png")}}),s._v(" "),a("p",[s._v("配置 maven 路径,"),a("em",[s._v("一定不要勾选自动安装")])]),s._v(" "),a("p",[a("code",[s._v("服务器配置Maven请查阅之前文档")])]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_08.png")}}),s._v(" "),a("p",[s._v("点击保存环境变量即可")]),s._v(" "),a("h4",{attrs:{id:"配置预警邮箱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置预警邮箱"}},[s._v("#")]),s._v(" 配置预警邮箱")]),s._v(" "),a("p",[s._v("进入系统配置，配置管理员邮箱，此步很重要，否则可能出现邮件认证出错的情况")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_09.png")}}),s._v(" "),a("p",[s._v("进入系统配置,点击邮箱配置,点击"),a("code",[s._v("高级")]),s._v("，如下图:")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_10.png")}}),s._v(" "),a("p",[s._v("登陆邮箱查看是否收发成功")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_11.png")}}),s._v(" "),a("h3",{attrs:{id:"构建-helloworld-工程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建-helloworld-工程"}},[s._v("#")]),s._v(" 构建 HelloWorld 工程")]),s._v(" "),a("p",[s._v("安装 maven 插件"),a("code",[s._v("Maven Integration")]),s._v(",点击直接安装即可")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_12.png")}}),s._v(" "),a("p",[s._v("创建 maven 工程，构建完成邮箱提醒,整体配置界面如图:")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_13.png")}}),s._v(" "),a("p",[s._v("构建成功或失败，查收邮件:")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/operation/jenkins_14.png")}}),s._v(" "),a("h2",{attrs:{id:"添加-jenkins-开机自启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加-jenkins-开机自启动"}},[s._v("#")]),s._v(" 添加 jenkins 开机自启动")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/rc.d\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" rc.local\n jenkins开机自启\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" /root/jenkins/jenkins-start.sh\n")])])]),a("p",[s._v("保存后退出")])])}),[],!1,null,null,null);a.default=e.exports}}]);