# 服务技术架构

## 概述

## 本内容你将获得

- 通知服务单条和批量发送的架构
- 通知服务异常处理的方式
- 通知服务切换原理和架构

## 技术架构

### 整体技术架构

> 待补充

### 批量处理技术架构

批量消息的处理，类似于延迟通知，针对于大众人群通知的服务场景，比如一次性发送 100 万短信，通知到民众

<img src="/framework/02_notice_batch.jpg" style="width:700px">

**架构说明:**

1. 采用消息 redis 的原因，主要考虑轻量，主要依赖于 redis+数据库持久化解决消息丢失的问题
2. 客户端通知接口发送到消息服务中，消息服务先保存到数据库持久化，然后发送到消息中间件
3. 消费服务，然后一次性批量发送(比如一次 500 发出)
4. 定时任务处理异常的未消费的短信，定时扫描异常的短信，如果确定发不出，则放到异常通知中，进行手工处理

## 其它

- 无
