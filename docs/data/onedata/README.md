# 数据中台环境

## 概述

数据中台针对的数据环境，主要是针对于内部开发环境，生产环境的配置远远大于开发环境
此处针对的中小型团队或者企业，大型团队企业资源要求另算

## 资源列表

> 以下为内部开发环境参考

### 硬件服务器

| 序号 | 服务器 | 服务器配置               | 外网 IP | 备注   |
| :--: | ------ | ------------------------ | ------- | ------ |
|  1   | 物理机 | 40 核 512G 内存 10T 硬盘 |         | 虚拟化 |

虚拟机服务器：

- 数据区算力: 16 核 256G 内存 4T 硬盘
- 中台区算力: 16 核 192G 内存 2T 硬盘
- 冗余区算力: 8 核 64G 内存 1T 硬盘

| 序号 | 区域   | 服务名      | 服务器地址      | 操作系统      | 服务器配置              | 账号密码 | 备注       |
| ---- | ------ | ----------- | --------------- | ------------- | ----------------------- | -------- | ---------- |
| 1    | 应用区 | platform_01 | 182.154.100.107 | CentOS7.2_x64 | 4 核 32G 内存 250G 硬盘 |          | 基础中间件 |
| 2    |        | platform_02 | 182.154.100.108 | CentOS7.2_x64 | 4 核 32G 内存 250G 硬盘 |          | 监控       |
|      |        |             |                 |               |                         |          |            |
| 3    | 数据区 | bigdata_01  | 182.154.100.111 | CentOS7.2_x64 | 4 核 64G 内存 1T 硬盘   |          | 数据节点   |
| 4    |        | bigdata_02  | 182.154.100.112 | CentOS7.2_x64 | 4 核 64G 内存 1T 硬盘   |          | 数据节点   |
| 5    |        | bigdata_03  | 182.154.100.113 | CentOS7.2_x64 | 4 核 64G 内存 1T 硬盘   |          | 数据节点   |
| 6    |        | bigdata_04  | 182.154.100.114 | CentOS7.2_x64 | 4 核 64G 内存 1T 硬盘   |          | 数据节点   |
| 7    |        | bigdata_05  | 182.154.100.115 | CentOS7.2_x64 | 4 核 32G 内存 512 硬盘  |          | 主节点     |

**注意事项**

- AI 算力使用第三方租用形式，进行训练和计算
- 数据模型和计划采用本地计算

## 资源计算模型

计算方式参考

### 服务器选型考虑

服务器选择物理机还是云主机

### 物理机

- 以 128G 内存,20 核物理 CPU,40 线程,8THDD 和 2TSSD 硬盘,戴尔品牌单台报价 4W 出差，一般物理机寿命 5 年左右。
- 需专业的运维人员，平均 1 个月 1 万，考虑电费开销

### 云主机

- 云主机：以阿里云为例，差不多相同配置，每年 5W
- 运维工作由阿里云完成，运维相对较轻松

### 企业选择

- 金融公司和阿里没有直接冲突的公司选择阿里云
- 中小公司/为了融资上市，选择阿里云，融资后买物理机
- 有长期打算，资金比较足，选择物理机

### 集群规模

这里假设每台服务器 8T 磁盘，128G 内存，确认集群规模：

- 每天日活跃用户 100 万，每人一天平均 100 条：100 万\*100 条=1 亿条
- 每条日志 1K 左右，每天 1 亿条：100000000/1024/1024 = 约 100G
- 5 年内不扩容服务器考虑：100G _ 365 天 _ 5 年 = 约 180T
- 保存 3 副本：180T\*3 = 540T
- 预保留 20% ~ 30% = 540/0.7 = 770T
- 服务器规模：8T \* 95 台服务器
- 数据采用压缩算法，压缩到 30%，服务器至少 30 台服务器

## 其它

- 无
