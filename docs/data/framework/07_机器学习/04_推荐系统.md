# 推荐系统

## 概述

个性化推荐(推荐系统)经历了多年的发展，已经成为互联网产品的标配，也是 AI 成功落地的分支之一，
在电商(淘宝/京东)、资讯(今日头条/微博)、音乐(网易云音乐/QQ 音乐)、短视频(抖音/快手)等热门
应用中,推荐系统都是核心组件之一。

## 愿景

- 提升用户体验: 通过个性化推荐，帮助用户快速定位感兴趣的信息。
- 提高产品销售: 帮助用户和产品建立精准连接，从而提高产品转换率。
- 发掘长尾价值: 根据用户兴趣，清空不是很热门的商品销售给特定人群。
- 方便移动互联网交互: 减少用户操作，主动帮助用户找到感兴趣内容。

## 推荐系统整体架构

<img :src="$withBase('/data/recom-flow.png')">

## 推荐思想

| 序号 | 内容     | 描述                                                                            | 备注 |
| ---- | -------- | ------------------------------------------------------------------------------- | ---- |
| 1    | 精准推送 | 利用用户和物品的特征信息，给用户推荐那些具有用户喜欢的特征的物品                |      |
| 2    | 物以类聚 | 利用用户喜欢过的物品，给用户推荐与他喜欢过的物品相似的物品                      |      |
| 3    | 人以群分 | 利用和用户相似的其他用户，给用户推荐那些和他们兴趣爱好相似的其他用户喜 欢的物品 |      |

- 利用用户和物品的特征信息，给用户推荐那些具有用户喜欢的特征的物品。
- 利用用户喜欢过的物品，给用户推荐与他喜欢过的物品相似的物品。
- 利用和用户相似的其他用户，给用户推荐那些和他们兴趣爱好相似的其他用户喜欢的物品

## 常见的推荐分类

| 序号 | 类型                   | 算法                 | 备注 |
| ---- | ---------------------- | -------------------- | ---- |
| 1    | 根据实时性分类         | 离线推荐             |      |
| 2    |                        | 实时推荐             |      |
| 3    | 根据推荐原则分类       | 基于相似度的推荐     |      |
| 4    |                        | 基于知识的推荐       |      |
| 5    |                        | 基于模型的推荐       |      |
| 6    | 根据推荐是否个性化分类 | 基于统计的推荐       |      |
| 7    |                        | 个性化推荐           |      |
| 8    | 根据数据源分类         | 基于人口统计学的推荐 |      |
| 9    |                        | 基于内容的推荐       |      |
| 10   |                        | 基于协同过滤的推荐   |      |

## 常用推荐算法

### 基于人口统计学的推荐

#### 优点

该推荐算法仅使用用户的基本信息数据，不涉及到用户对物品的历史偏好数据，所以对于新
用户来说，只要有他（她）的基本信息就可以进行推荐，不存在“冷启动”问题；
该推荐算法在不同的物品领域都可以使用，因为它不依赖于物品信息，可称为“领域独立”；

#### 缺点

该推荐算法目前仅基于用户的基本信息，比较粗糙；在一些对品味要求比较高的领域，比如
音乐、电影等，不能得到很好的推荐效果；用户的基本信息不好获取，比如年龄等；在某些
情况下，用户的基本信息也需要通过建模获取；

### 基于内容的推荐

基于内容的推荐算法(Content-Based Recommendations)是基于标的物相关信息、用户相关信
息及用户对标的物的操作行为来构建推荐算法模型，为用户提供推荐服务。

这里的标的物相关信息可以是对标的物文字描述的 metadata 信息、标签、用户评论、人工标注
的信息等。用户相关信息是指人口统计学信息(如年龄、性别、偏好、地域、收入等等)。

用户对标的物的操作行为可以是评论、收藏、点赞、观看、浏览、点击、加购物车、购买等。
基于内容的推荐算法一般只依赖于用户自身的行为为用户提供推荐，不涉及到其他用户的行为。

广义的标的物相关信息不限于文本信息，图片、语音、视频等都可以作为内容推荐的信息来源，
只不过这类信息处理成本较大，不光是算法难度大、处理的时间及存储成本也相对更高。

基于内容的推荐算法算是最早应用于工程实践的推荐算法，有大量的应用案例，如今日头条的
推荐有很大比例是基于内容的推荐算法。

### 基于协同过滤的推荐

#### 基于用户(user-based)的协同过滤

用户和用户之间的相似度，只要找出相似用户喜欢的物品，并预测目标用户对对应物品的评分，
就可以找到评分最高的若干个物品推荐给用户

#### 基于物品(item-based)的协同过滤

找到物品和物品之间的相似度，只有找到了目标用户对某些物品的评分，那么我们就可以对相
似度高的类似物品进行预测，将评分最高的若干个相似物品推荐给用户。比如你在网上买了一
本机器学习相关的书，网站马上会推荐一堆机器学习，大数据相关的书给你，这里就明显用到
了基于物品的协同过滤思想

#### 基于模型(model based)的协同过滤

> 重点

利用用户-物品评分矩阵训练机器学习模型，将用户和物品的 id 带入到模型中就会得到用户对物
品的评分预测，Model-Based CF 算法分类如下：

- 基于分类算法、回归算法、聚类算法
- 基于矩阵分解的推荐
- 基于神经网络算法
- 基于图模型算法

### 混合推荐

实际网站的推荐系统往往都不是单纯只采用了某一种推荐的机制和策略，往往是将多
个方法混合在一起，从而达到更好的推荐效果。比较流行的组合方法有：

| 序号 | 算法     | 说明                                                                                                                |
| ---- | -------- | ------------------------------------------------------------------------------------------------------------------- |
| 1    | 加权混合 | 用线性公式将几种不同的推荐按照一定权重组合起来，具体权重的值需要在测试数据集上反复实验，从而达到最好的推荐效果      |
| 2    | 切换混合 | 切换的混合方式，就是允许在不同的情况（数据量，系统运行状况，用户和物品的数目等）下， 选择最为合适的推荐机制计算推荐 |
| 3    | 分区混合 | 采用多种推荐机制，并将不同的推荐结果分不同的区显示给用户                                                            |
| 4    | 分层混合 | 采用多种推荐机制，并将一个推荐机制的结果作为另一个的输入，从而综合各个推荐机制的优缺点，得到更加准确的推荐          |

## 推荐系统评测指标

预测准确度/用户满意度/覆盖率/多样性/惊喜度/信任度/实时性/健壮性/商业目标

## 参考资料

- [推荐系统](http://www.liushen.xyz/%E8%AF%BE%E4%BB%B6/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/)
- [协同过滤推荐算法](https://zhuanlan.zhihu.com/p/80069337)
- [完整的推荐系统架构设计](https://xie.infoq.cn/article/e1db36aecf60b4da29f56eeb4)

## 其它

- 略
