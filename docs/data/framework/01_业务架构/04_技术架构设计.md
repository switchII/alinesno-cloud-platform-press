# 平台技术构架

## 概述

根据一定的业务场景需求，从整体业务架构从数据采集，到数据计算分析，
到数据产出整体流程进行了规划和设计。

## 数据中台技术架构

数据仓库业务技术架构
<img :src="$withBase('/data/bus_arc_01.png')">

如上图所示为本次共享资源平台逻辑架构图，上图整体展现说明包括以下几个方面：

1. 应用系统建设
   本次项目的一项重点就是实现原有应用系统的全面升级以及新的应用系统的开发

2. 应用资源采集
   整体应用系统资源统一分为两类，具体包括结构化资源和非机构化资源。

3. 数据分析与展现
   采集完成的数据将通过有效的资源分析管理机制实现资源的有效管理与展现，具体包括了对资源的查询。

4. 数据的应用
   最终数据将通过内外网门户对外进行发布，相关人员包括局内各个部门人员、区各委办局

## 技术选型

| 序号 | 说明             | 技术          | 版本       | 备注 |
| :--: | ---------------- | ------------- | ---------- | ---- |
|  1   | 大数据管理平台   | CDH           | 6.2.0      |      |
|  1   | 数据采集         | Flume         | 1.7.0      |      |
|  1   | 数据存储         | Hadoop        | 1.7.0      |      |
|  2   | 流式数据处理     | Datahub       |            |      |
|  3   | 数据离线计算     | spark         |            |      |
|  4   | 数据全量同步     | DataX         | 3.0.0      |      |
|  5   | 数据增同步       | Canal         | 1.1.3      |      |
|  6   | 流(实时)处理框架 | Flink         | 1.10.1     |      |
|  7   | 数据总线         | Kafka         | 2.11-2.0.1 |      |
|  8   | ETL 数据采集工具 | Kettle        |            |      |
|  9   | BI 报表工具      | Superset      |            |      |
|  9   | 数据报表         | UReport2      |            |      |
|  10  | 数据显示         | Echarts       | 4.2.1      |      |
|  11  | 数据分析存储     | MySQL         |            |      |
|  12  | 机器学习         | Spark MLlib   |            |      |
|  13  | 机器学习         | Apache Mahout |            |      |

### 技术简介

#### Kafka

在本次实时数据仓库实现中，Kafka 的定位是一个接受大量上游数据(日志服务器数据、业务系统的增量数据、
Flink 的部分处理结果)的消息队列，通过 Kafka 的承载能力来接受大量的数据，最后由下游的应用进行选
择消费(Flink 中不同层次的数据)，通过 Kafka 的各种容错机制能保证消息的准确，
也可以通过异步发送的形式来将大量的日志数据进行处理。

#### DataX

在数据仓库中，总有一部分数据是不常变更或者数据量不是很大，这一部分数据不需要实时的同步，
我们只需要在数据进行变更的时候进行全量的同步即可。DataX 便是这么一个进行数据同步的工具，
通过 DataX 我们可以灵活的通过配置文件的方式指定数据库进行同步。

#### Canal

在实时数据仓库中，有不少的数据都是会进行实时更新且数据量巨大，这部分数据很适合进行增量同步。
Canal 就是进行增量同步的其中一个工具之前，通过读取 binlog 的方式来对数据库进行同步，
每当数据库有变化 canal 第一时间把变化的信息(Delete、insert、update)告诉下游信息，这样便能以
最小的代价对数据进行增量同步。

#### Flink

Flink 通过流计算的方式对数据进行处理，擅长处理无界和有界数据集,精确的时间控制和状态化使得 Flink
的运行时能够运行任何处理无界流的应用(例如接收来自 Kafka 的消息)。有界流则由一些专为固定大小
数据集特殊设计的算法和数据结构进行内部处理(例如直接读取 MySQL 的数据)，产生了出色的性能。

#### Echarts

在处理完所有的数据之后，我们要把这些数据进行一个可视化的展示，Echarts 里提供了大量的模板和实例，
模板不仅美观好看，还能让你在官网通过实例的方式在编写代码前对 Echarts 进行预览。

## 其它

- 略
