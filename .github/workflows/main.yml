name: Publish page

on:
  push:
    branches:
      - 2.1.3-Alpha

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    env:
      # é…ç½®ç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬é•œåƒçš„åç§°ï¼Œç‰ˆæœ¬å·ï¼Œè¿˜æœ‰å‘½åç©ºé—´
      PRO_NAME: alinesno-platform-press
      PRO_VERSION: 2.1.3-Alpha.${{ github.run_number }}
      DOCKER_HUB_NAMESPACE: luoandong
      EXPOSE_PORT: 84
      #  æ·»åŠ cdné…ç½®
      accessKey: ${{ secrets.QINIU_ACCESS_KEY }}
      secretKey: ${{ secrets.QINIU_SECRET_KEY }}
      spaceBucket: acp-document-site
      remoteFolder: /
      domain: http://acp-document.linesno.com
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2
        with:
          persist-credentials: false

      - name: Use Node.js ${{ matrix.node-version }} ğŸ”§ # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.
        uses: actions/setup-node@v1
        with:
          node-version: '16.13.1'

      - name: Install Dependencies
        run: npm i

      # éƒ¨ç½²åˆ° GitHub Pages
      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }} # ä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„ secret
          BRANCH: gh-pages # éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯ï¼Œå› ä¸º main åˆ†æ”¯å­˜æ”¾çš„ä¸€èˆ¬æ˜¯æºç ï¼Œè€Œ gh-pages åˆ†æ”¯åˆ™ç”¨æ¥å­˜æ”¾ç”Ÿæˆçš„é™æ€æ–‡ä»¶
          FOLDER: docs/.vuepress/dist # vuepress ç”Ÿæˆçš„é™æ€æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹
